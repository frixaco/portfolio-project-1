{"version":3,"sources":["components/Chat/Chat.jsx","redux/chat/chatActions.js","components/Posts/Posts.jsx","components/Navbars/HomeNavBar.jsx","pages/Home/Home.jsx"],"names":["connect","username","user","chat","usersOnline","chatHistory","newMessage","message","type","ChatActionTypes","NEW_MESSAGE","payload","userOnline","USER_ONLINE","React","useState","messageValue","setMessageValue","messagesRef","useRef","useEffect","socket","on","off","emit","current","scrollTo","class","className","length","ref","map","idx","key","style","fontSize","color","text","Date","toLocaleString","placeholder","value","onChange","e","target","onKeyDown","onClick","i","ListPosts","lazy","Modal","setAppElement","modalStyles","overlay","position","top","left","right","bottom","backgroundColor","content","posts","items","areFetching","fetchPostsAsync","createPostAsync","searchField","setSearchField","modalIsOpen","setIsOpen","title","imglink","postForm","setPostForm","pexelLoading","setPexelLoading","closeModal","fillForm","name","pickRandomImage","a","min","max","Math","ceil","floor","random","err","console","log","filteredPosts","filter","post","toLowerCase","includes","fallback","Spinner","isOpen","onRequestClose","contentLabel","id","htmlFor","cols","rows","width","src","alt","marginTop","newPost","author","date","state","logoutUser","to","href","rel","Home"],"mappings":"6JAiGA,IASeA,eATS,SAAC,GAAD,IACdC,EADc,EACtBC,KAAQD,SADc,IAEtBE,KAFsB,MAGjB,CACLC,YAJsB,EAEdA,YAGRC,YALsB,EAEDA,YAIrBJ,cAGsC,CAAEK,WCxGhB,SAAAC,GAAO,MAAK,CAClCC,KAAMC,IAAgBC,YACtBC,QAASJ,IDsGyCK,WCnG5B,SAAAR,GAAW,MAAK,CACtCI,KAAMC,IAAgBI,YACtBF,QAASP,KDiGEJ,EApGf,YAA+E,IAA/DI,EAA8D,EAA9DA,YAAaC,EAAiD,EAAjDA,YAAaJ,EAAoC,EAApCA,SAAUK,EAA0B,EAA1BA,WAAYM,EAAc,EAAdA,WAAc,EACpCE,IAAMC,SAAS,IADqB,mBACrEC,EADqE,KACvDC,EADuD,KAEtEC,EAAcJ,IAAMK,SA+C1B,OAvBAC,qBAAU,WAOR,OANAC,IAAOC,GAAG,uBAAuB,SAAClB,GAChCQ,EAAWR,MAEbiB,IAAOC,GAAG,uBAAuB,SAACf,GAChCD,EAAWC,MAEN,WACLc,IAAOE,IAAI,uBACXF,IAAOE,IAAI,0BAEZ,CAACX,EAAYN,IAEhBc,qBAAU,WACJnB,GACFoB,IAAOG,KAAK,kBAAmBvB,KAEhC,CAACA,IAEJmB,qBAAU,WACRF,EAAYO,QAAQC,SAAS,EAAG,SAC/B,CAACrB,IAGF,6BAASsB,MAAM,gBACb,yBAAKC,UAAU,eACb,gDACA,sCACU,8BAAOxB,EAAYyB,UAI/B,yBAAKC,IAAKZ,EAAaS,MAAM,gBAC1BtB,EAAY0B,KAAI,SAACxB,EAASyB,GAAV,OACf,yBACEC,IAAKD,EACLJ,UAAS,kBAAarB,EAAQN,WAAaA,EAAW,KAAO,KAE7D,uBACEiC,MAAO,CAAEC,SAAU,SAAUC,MAAO,YADtC,UAEK7B,EAAQN,WACb,qCAAOM,EAAQ8B,OACf,+BAAO,IAAIC,MAAOC,qBAIxB,yBAAKZ,MAAM,gBACT,2BACEnB,KAAK,OACLgC,YAAY,oBACZC,MAAOzB,EACP0B,SAAU,SAACC,GAAD,OAAO1B,EAAgB0B,EAAEC,OAAOH,QAC1CI,UA1Ee,SAACF,GACR,UAAVA,EAAEV,MACiB,KAAjBjB,GACFK,IAAOG,KAAK,cAAe,CACzBvB,WACAoC,KAAMrB,IAGVC,EAAgB,QAoEd,uBAAG6B,QAhEa,WACC,KAAjB9B,GACFK,IAAOG,KAAK,cAAe,CACzBvB,WACAoC,KAAMrB,IAGVC,EAAgB,KAyDeU,MAAM,wBAEnC,yBAAKC,UAAU,gBACZxB,EAAY2B,KAAI,SAAC7B,EAAM6C,GAAP,OACf,8BAAO7C,W,0EEhFX8C,EAAYlC,IAAMmC,MAAK,kBAAM,iCAEnCC,IAAMC,cAAc,SAEpB,IAAMC,EAAc,CAClBC,QAAS,CACPC,SAAU,QACVC,IAAK,EACLC,KAAM,EACNC,MAAO,EACPC,OAAQ,EACRC,gBAAiB,6BAEnBC,QAAS,CACPD,gBAAiB,gBAmIrB,IAKe3D,eALS,SAAC,GAAD,QACtB6D,MAASC,EADa,EACbA,MAAOC,EADM,EACNA,YADM,MAGjB,CAAED,QAAO7D,SAHQ,EAEtBC,KAAQD,SACgB8D,iBAEc,CAAEC,oBAAiBC,qBAA5CjE,EA9Hf,YAAuE,IAAtDC,EAAqD,EAArDA,SAAUgE,EAA2C,EAA3CA,gBAAiBD,EAA0B,EAA1BA,gBAAiBF,EAAS,EAATA,MAAS,EAC9B/C,mBAAS,IADqB,mBAC7DmD,EAD6D,KAChDC,EADgD,OAEnCpD,oBAAS,GAF0B,mBAE7DqD,EAF6D,KAEhDC,EAFgD,OAGpCtD,mBAAS,CACvCuD,MAAO,GACPV,QAAS,GACTW,QAAS,KANyD,mBAG7DC,EAH6D,KAGnDC,EAHmD,OAQ5B1D,oBAAS,GARmB,mBAQ7D2D,EAR6D,KAQ/CC,EAR+C,KAapE,SAASC,IACPH,EAAY,CAAEH,MAAO,GAAIV,QAAS,GAAIW,QAAS,KAC/CF,GAAU,GAEZ,IAaMQ,EAAW,SAAClC,GAAD,OACf8B,EAAY,2BAAKD,GAAN,kBAAiB7B,EAAEC,OAAOkC,KAAOnC,EAAEC,OAAOH,UAEjDsC,EAAe,uCAAG,sBAAAC,EAAA,sDACtB,IACEL,GAAgB,GAChBF,EAAY,2BACPD,GADM,IAETD,QAAQ,4BAAD,QA5COU,EA4CoC,EA5C/BC,EA4CkC,IA3C3DD,EAAME,KAAKC,KAAKH,GAChBC,EAAMC,KAAKE,MAAMH,GACVC,KAAKE,MAAMF,KAAKG,UAAYJ,EAAMD,EAAM,IAAMA,GAyCxC,eAETN,GAAgB,GAChB,MAAOY,GACPC,QAAQC,IAAIF,EAAIhF,SATI,iCAvC1B,IAAsB0E,EAAKC,IAuCD,OAAH,qDAarB9D,qBAAU,WACJnB,GACF+D,MAED,CAAC/D,EAAU+D,IAEd,IAAM0B,EAAgB5B,EAAM6B,QAAO,SAACC,GAAD,OACjCA,EAAKtB,MAAMuB,cAAcC,SAAS5B,EAAY2B,kBAEhD,OACE,6BAASjE,UAAU,iBACjB,yBAAKA,UAAU,QACb,yBAAKA,UAAU,YACb,4BAAQkB,QAjDhB,WACEuB,GAAU,KAgDJ,aAEF,yBAAKzC,UAAU,eACb,2BACEa,MAAOyB,EACPxB,SAAU,SAACC,GAAD,OAAOwB,EAAexB,EAAEC,OAAOH,QACzCjC,KAAK,OACLgC,YAAY,4BAIlB,kBAAC,WAAD,CAAUuD,SAAU,kBAACC,EAAA,EAAD,OAClB,kBAAChD,EAAD,CAAW0C,cAAeA,KAG5B,kBAAC,IAAD,CACEO,OAAQ7B,EACR8B,eAAgBtB,EAChBuB,aAAa,QACbjE,MAAOkB,GAEP,yBAAKgD,GAAG,SACN,2BAAOC,QAAQ,aAAf,SACA,2BACE5D,MAAO+B,EAASF,MAChB5B,SAAUmC,EACVC,KAAK,QACLtC,YAAY,qBACZ4D,GAAG,YACH5F,KAAK,SAEP,2BAAO6F,QAAQ,aAAf,aACA,8BACE5D,MAAO+B,EAASZ,QAChBlB,SAAUmC,EACVC,KAAK,UACLtC,YAAY,uBACZ4D,GAAG,eACHE,KAAK,KACLC,KAAK,MAEP,4BAAQzD,QAASiC,GAAjB,qBACCL,EACC,kBAACsB,EAAA,EAAD,MACGxB,EAASD,QACZ,yBACEiC,MAAM,MACN5E,UAAU,UACV6E,IAAKjC,EAASD,QACdmC,IAAI,KALgB,KAQxB,yBAAK/E,MAAM,aAAaO,MAAO,CAAEyE,UAAW,KAC1C,4BAAQ7D,QAAS8B,GAAjB,UACA,4BAAQ9B,QAhGC,WACjB,IAAM8D,EAAU,CACdC,OAAQ5G,EACRqE,MAAOE,EAASF,MAChBV,QAASY,EAASZ,QAClBW,QAASC,EAASD,QAClBuC,MAAM,IAAIxE,MAAOC,kBAEnB0B,EAAgB2C,GAChBnC,EAAY,CAAEH,MAAO,GAAIV,QAAS,GAAIW,QAAS,KAC/CF,GAAU,KAsFF,e,gBC1GZ,IAEerE,eAFS,SAAC+G,GAAD,MAAY,CAAE9G,SAAU8G,EAAM7G,KAAKD,YAEnB,CAAE+G,gBAA3BhH,EApCf,YAA+C,IAAzBC,EAAwB,EAAxBA,SAAU+G,EAAc,EAAdA,WAM9B,OACE,6BACE,yBAAKpF,UAAU,YACb,kBAAC,IAAD,CAAMqF,GAAE,YACN,yBAAKrF,UAAU,QACb,uBAAGA,UAAU,yBAGjB,wCAAc3B,EAAd,MAEF,yBAAK2B,UAAU,aACb,uBACEgB,OAAO,SACPsE,KAAK,yCACLC,IAAI,uBAEJ,yBAAKvF,UAAU,QACb,uBAAGA,UAAU,oBAGjB,yBAAKkB,QAzBU,WACnBzB,IAAOG,KAAK,oBAAqBvB,GACjC+G,KAuBgCpF,UAAU,QACpC,uBAAGA,UAAU,8BChBRwF,UAZf,WACE,OACE,yBAAKzF,MAAM,uBACT,kBAAC,EAAD,MACA,8BACE,kBAAC,EAAD,MACA,kBAAC,EAAD","file":"static/js/7.93c6af8f.chunk.js","sourcesContent":["import React, { useEffect } from \"react\";\nimport { connect } from \"react-redux\";\n\nimport { newMessage, userOnline } from \"../../redux/chat/chatActions\";\nimport socket from \"../../initSocket\";\n\nfunction Chat({ usersOnline, chatHistory, username, newMessage, userOnline }) {\n  const [messageValue, setMessageValue] = React.useState(\"\");\n  const messagesRef = React.useRef();\n\n  const sendMsgOnEnter = (e) => {\n    if (e.key === \"Enter\") {\n      if (messageValue !== \"\") {\n        socket.emit(\"new_message\", {\n          username,\n          text: messageValue,\n        });\n      }\n      setMessageValue(\"\");\n    }\n  };\n\n  const onSendMessage = () => {\n    if (messageValue !== \"\") {\n      socket.emit(\"new_message\", {\n        username,\n        text: messageValue,\n      });\n    }\n    setMessageValue(\"\");\n  };\n\n  useEffect(() => {\n    socket.on(\"update_users_online\", (usersOnline) => {\n      userOnline(usersOnline);\n    });\n    socket.on(\"update_chat_history\", (message) => {\n      newMessage(message);\n    });\n    return () => {\n      socket.off(\"update_users_online\");\n      socket.off(\"update_chat_history\");\n    };\n  }, [userOnline, newMessage]);\n\n  useEffect(() => {\n    if (username) {\n      socket.emit(\"new_online_user\", username);\n    }\n  }, [username]);\n\n  useEffect(() => {\n    messagesRef.current.scrollTo(0, 99999);\n  }, [chatHistory]);\n\n  return (\n    <section class=\"chat-section\">\n      <div className=\"chat-header\">\n        <h4>Live global chat</h4>\n        <p>\n          Online: <span>{usersOnline.length}</span>\n        </p>\n      </div>\n      {/* USERS ONLINE: WHO JOINED AND WHO LEFT */}\n      <div ref={messagesRef} class=\"chat-history\">\n        {chatHistory.map((message, idx) => (\n          <div\n            key={idx}\n            className={`message ${message.username === username ? \"my\" : \"\"}`}\n          >\n            <p\n              style={{ fontSize: \"0.8rem\", color: \"#6e93d6\" }}\n            >{`${message.username}`}</p>\n            <p>{`${message.text}`}</p>\n            <span>{new Date().toLocaleString}</span>\n          </div>\n        ))}\n      </div>\n      <div class=\"send-message\">\n        <input\n          type=\"text\"\n          placeholder=\"Type your message\"\n          value={messageValue}\n          onChange={(e) => setMessageValue(e.target.value)}\n          onKeyDown={sendMsgOnEnter}\n        />\n        <i onClick={onSendMessage} class=\"fas fa-paper-plane\"></i>\n      </div>\n      <div className=\"users-online\">\n        {usersOnline.map((user, i) => (\n          <span>{user}</span>\n        ))}\n      </div>\n    </section>\n  );\n}\n\nconst mapStateToProps = ({\n  user: { username },\n  chat: { usersOnline, chatHistory },\n}) => ({\n  usersOnline,\n  chatHistory,\n  username,\n});\n\nexport default connect(mapStateToProps, { newMessage, userOnline })(Chat);\n","import ChatActionTypes from './chatTypes';\n\nexport const newMessage = message => ({\n    type: ChatActionTypes.NEW_MESSAGE,\n    payload: message,\n});\n\nexport const userOnline = usersOnline => ({\n    type: ChatActionTypes.USER_ONLINE,\n    payload: usersOnline,\n});","import React, { Suspense, useState, useEffect } from \"react\";\nimport { connect } from \"react-redux\";\nimport Modal from \"react-modal\";\n\nimport {\n  createPostAsync,\n  fetchPostsAsync,\n} from \"../../redux/posts/postsActions\";\nimport Spinner from \"../Spinner/Spinner\";\n\nconst ListPosts = React.lazy(() => import(\"./ListPosts\"));\n\nModal.setAppElement(\"#root\");\n\nconst modalStyles = {\n  overlay: {\n    position: \"fixed\",\n    top: 0,\n    left: 0,\n    right: 0,\n    bottom: 0,\n    backgroundColor: \"rgba(255, 255, 255, 0.75)\",\n  },\n  content: {\n    backgroundColor: \"transparent\",\n  },\n};\n\nfunction getRandomInt(min, max) {\n  min = Math.ceil(min);\n  max = Math.floor(max);\n  return Math.floor(Math.random() * (max - min + 1)) + min;\n}\n\nfunction Posts({ username, createPostAsync, fetchPostsAsync, items }) {\n  const [searchField, setSearchField] = useState(\"\");\n  const [modalIsOpen, setIsOpen] = useState(false);\n  const [postForm, setPostForm] = useState({\n    title: \"\",\n    content: \"\",\n    imglink: \"\",\n  });\n  const [pexelLoading, setPexelLoading] = useState(false);\n\n  function openModal() {\n    setIsOpen(true);\n  }\n  function closeModal() {\n    setPostForm({ title: \"\", content: \"\", imglink: \"\" });\n    setIsOpen(false);\n  }\n  const handleSave = () => {\n    const newPost = {\n      author: username,\n      title: postForm.title,\n      content: postForm.content,\n      imglink: postForm.imglink,\n      date: new Date().toLocaleString(),\n    };\n    createPostAsync(newPost);\n    setPostForm({ title: \"\", content: \"\", imglink: \"\" });\n    setIsOpen(false);\n  };\n\n  const fillForm = (e) =>\n    setPostForm({ ...postForm, [e.target.name]: e.target.value });\n\n  const pickRandomImage = async () => {\n    try {\n      setPexelLoading(true);\n      setPostForm({\n        ...postForm,\n        imglink: `https://picsum.photos/id/${getRandomInt(1, 200)}/500/600`,\n      });\n      setPexelLoading(false);\n    } catch (err) {\n      console.log(err.message);\n    }\n  };\n\n  useEffect(() => {\n    if (username) {\n      fetchPostsAsync();\n    }\n  }, [username, fetchPostsAsync]);\n\n  const filteredPosts = items.filter((post) =>\n    post.title.toLowerCase().includes(searchField.toLowerCase())\n  );\n  return (\n    <section className=\"posts-section\">\n      <div className=\"menu\">\n        <div className=\"new-post\">\n          <button onClick={openModal}>NEW POST</button>\n        </div>\n        <div className=\"search-post\">\n          <input\n            value={searchField}\n            onChange={(e) => setSearchField(e.target.value)}\n            type=\"text\"\n            placeholder=\"Search posts by title\"\n          />\n        </div>\n      </div>\n      <Suspense fallback={<Spinner />}>\n        <ListPosts filteredPosts={filteredPosts} />\n      </Suspense>\n\n      <Modal\n        isOpen={modalIsOpen}\n        onRequestClose={closeModal}\n        contentLabel=\"modal\"\n        style={modalStyles}\n      >\n        <div id=\"modal\">\n          <label htmlFor=\"new-title\">Title</label>\n          <input\n            value={postForm.title}\n            onChange={fillForm}\n            name=\"title\"\n            placeholder=\"Title of your post\"\n            id=\"new-title\"\n            type=\"text\"\n          />\n          <label htmlFor=\"new-title\">Main body</label>\n          <textarea\n            value={postForm.content}\n            onChange={fillForm}\n            name=\"content\"\n            placeholder=\"Content of your post\"\n            id=\"post-content\"\n            cols=\"20\"\n            rows=\"4\"\n          ></textarea>\n          <button onClick={pickRandomImage}>Pick random image</button>\n          {pexelLoading ? (\n            <Spinner />\n          ) : !postForm.imglink ? null : (\n            <img\n              width=\"300\"\n              className=\"imglink\"\n              src={postForm.imglink}\n              alt=\"\"\n            />\n          )}\n          <div class=\"modal-btns\" style={{ marginTop: 15 }}>\n            <button onClick={closeModal}>Cancel</button>\n            <button onClick={handleSave}>SAVE</button>\n          </div>\n        </div>\n      </Modal>\n    </section>\n  );\n}\n\nconst mapStateToProps = ({\n  posts: { items, areFetching },\n  user: { username },\n}) => ({ items, username, areFetching });\n\nexport default connect(mapStateToProps, { fetchPostsAsync, createPostAsync })(\n  Posts\n);\n","import React from \"react\";\nimport { Link } from \"react-router-dom\";\nimport { connect } from \"react-redux\";\n\nimport { logoutUser } from \"../../redux/user/userActions\";\nimport socket from \"../../initSocket\";\n\nfunction HomeNavBar({ username, logoutUser }) {\n  const handleLogout = () => {\n    socket.emit(\"user_disconnected\", username);\n    logoutUser();\n  };\n\n  return (\n    <nav>\n      <div className=\"left-nav\">\n        <Link to={`/profile`}>\n          <div className=\"icon\">\n            <i className=\"fas fa-user-circle\"></i>\n          </div>\n        </Link>\n        <h4>Welcome, {username}!</h4>\n      </div>\n      <div className=\"right-nav\">\n        <a\n          target=\"_blank\"\n          href=\"https://github.com/frixaco/post-n-chat\"\n          rel=\"noopener noreferrer\"\n        >\n          <div className=\"icon\">\n            <i className=\"fab fa-github\"></i>\n          </div>\n        </a>\n        <div onClick={handleLogout} className=\"icon\">\n          <i className=\"fas fa-sign-out-alt\"></i>\n        </div>\n      </div>\n    </nav>\n  );\n}\n\nconst mapStateToProps = (state) => ({ username: state.user.username });\n\nexport default connect(mapStateToProps, { logoutUser })(HomeNavBar);\n","import React from \"react\";\n\nimport Chat from \"../../components/Chat/Chat\";\nimport Posts from \"../../components/Posts/Posts\";\nimport HomeNavBar from \"../../components/Navbars/HomeNavBar\";\n\nfunction Home() {\n  return (\n    <div class=\"home-page-container\">\n      <HomeNavBar />\n      <main>\n        <Posts />\n        <Chat />\n      </main>\n    </div>\n  );\n}\n\nexport default Home;\n"],"sourceRoot":""}