(this.webpackJsonpclient=this.webpackJsonpclient||[]).push([[0],{128:function(e,t){},135:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),l=a(15),s=a.n(l),c=(a(78),a(3)),o=a(11),i={GUEST_USER:"GUEST_USER",LOGIN_START:"LOGIN_START",LOGIN_SUCCESS:"LOGIN_SUCCESS",LOGIN_FAILURE:"LOGIN_FAILURE",UPDATE_PROFILE_START:"UPDATE_PROFILE_START",UPDATE_PROFILE_SUCCESS:"UPDATE_PROFILE_SUCCESS",UPDATE_PROFILE_FAILURE:"UPDATE_PROFILE_FAILURE",LOGOUT:"LOGOUT"},u=a(12),m=a.n(u),d=function(e){return function(t){t({type:i.LOGIN_START}),m.a.post("/auth/login",e).then((function(e){return t(function(e){return{type:i.LOGIN_SUCCESS,payload:e}}(e.data))})).catch((function(e){return t((a=e.message,{type:i.LOGIN_FAILURE,payload:a}));var a}))}},E=function(){return{type:i.LOGOUT}},p=a(4),g=a(5),f={NEW_MESSAGE:"NEW_MESSAGE",USER_ONLINE:"USER_ONLINE"},b=a(69),v=a.n(b).a.connect("/",{"sync disconnect on unload":!1});var O=Object(c.b)((function(e){var t=e.user.username,a=e.chat;return{usersOnline:a.usersOnline,chatHistory:a.chatHistory,username:t}}),{newMessage:function(e){return{type:f.NEW_MESSAGE,payload:e}},userOnline:function(e){return{type:f.USER_ONLINE,payload:e}}})((function(e){var t=e.usersOnline,a=e.chatHistory,l=e.username,s=e.newMessage,c=e.userOnline,o=r.a.useState(""),i=Object(g.a)(o,2),u=i[0],m=i[1],d=r.a.useRef();return Object(n.useEffect)((function(){return v.on("update_users_online",(function(e){c(e)})),v.on("update_chat_history",(function(e){s(e)})),function(){v.off("update_users_online"),v.off("update_chat_history")}}),[]),Object(n.useEffect)((function(){l&&v.emit("new_online_user",l)}),[l]),Object(n.useEffect)((function(){d.current.scrollTo(0,99999)}),[a]),r.a.createElement("div",{className:"chat"},r.a.createElement("h4",{className:"chat-header"},"Welcome to our Chat!"),r.a.createElement("span",{className:"divider"}),r.a.createElement("div",{className:"chat-messages"},r.a.createElement("div",{ref:d,className:"messages"},a.map((function(e,t){return r.a.createElement("div",{key:t,className:"message ".concat(e.username===l?"my":"")},r.a.createElement("span",{className:"btn-secondary rounded px-1"},e.username),r.a.createElement("p",null,e.text))}))),r.a.createElement("div",{className:"myform"},r.a.createElement("input",{value:u,onChange:function(e){return m(e.target.value)},className:"myinput"}),r.a.createElement("button",{onClick:function(){""!==u&&v.emit("new_message",{username:l,text:u}),m("")},type:"button",className:"btn btn-secondary"},"Send")),r.a.createElement("div",{className:"chat-users"},r.a.createElement("p",null,"Online (",t.length,"):"),t.map((function(e,t){return r.a.createElement("span",{key:e+t,className:"badge badge-success mx-1"},e)})))))})),S={FETCH_POSTS_START:"FETCH_POSTS_START",FETCH_POSTS_SUCCESS:"FETCH_POSTS_SUCCESS",FETCH_POSTS_FAILURE:"FETCH_POSTS_FAILURE",NEW_POST_START:"NEW_POST_START",NEW_POST_SUCCESS:"NEW_POST_SUCCESS",NEW_POST_FAILURE:"NEW_POST_FAILURE",EDIT_POST_START:"EDIT_POST_START",EDIT_POST_SUCCESS:"EDIT_POST_SUCCESS",EDIT_POST_FAILURE:"EDIT_POST_FAILURE",DELETE_POST_START:"DELETE_POST_START",DELETE_POST_SUCCESS:"DELETE_POST_SUCCESS",DELETE_POST_FAILURE:"DELETE_POST_FAILURE"},h=a(20),N=a.n(h),T=a(29),_=a(1);var y=Object(c.b)((function(e){return{username:e.user.username}}),{createPostAsync:function(e){return function(t){t({type:S.NEW_POST_START}),m.a.post("/post",e).then((function(e){t(function(e){return{type:S.NEW_POST_SUCCESS,payload:e}}(e.data.post))})).catch((function(e){return t((a=e.message,{type:S.NEW_POST_FAILURE,payload:a}));var a}))}}})((function(e){var t=e.username,a=e.createPostAsync,l=Object(n.useState)({title:"",content:"",keyword:"",imglink:""}),s=Object(g.a)(l,2),c=s[0],i=s[1],u=function(e){return i(Object(_.a)(Object(_.a)({},c),{},Object(o.a)({},e.target.name,e.target.value)))},d=function(){var e=Object(T.a)(N.a.mark((function e(){var t,a;return N.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,m.a.get("https://api.pexels.com/v1/search?query=".concat(c.keyword,"&per_page=1"),{headers:{Authorization:"563492ad6f9170000100000125fdd7dd0cbd4bada2257ce4d4c5b090"}});case 3:t=e.sent,a=t.data.photos[0].src.medium,i(Object(_.a)(Object(_.a)({},c),{},{imglink:a})),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(0),console.log(e.t0.message);case 11:case"end":return e.stop()}}),e,null,[[0,8]])})));return function(){return e.apply(this,arguments)}}();return r.a.createElement("div",{className:"modal fade",id:"exampleModal",tabIndex:"-1",role:"dialog","aria-labelledby":"exampleModalLabel","aria-hidden":"true"},r.a.createElement("div",{className:"modal-dialog",role:"document"},r.a.createElement("div",{className:"modal-content"},r.a.createElement("div",{className:"modal-header"},r.a.createElement("h5",{className:"modal-title",id:"exampleModalLabel"},"Create a new post"),r.a.createElement("button",{type:"button",className:"close","data-dismiss":"modal","aria-label":"Close"},r.a.createElement("span",{"aria-hidden":"true"},"\xd7"))),r.a.createElement("div",{className:"modal-body"},r.a.createElement("div",{className:"form-group"},r.a.createElement("label",{forhtml:"title"},"Title"),r.a.createElement("input",{value:c.title,onChange:u,name:"title",type:"text",className:"form-control",id:"title",placeholder:"Give a title for your post"})),r.a.createElement("div",{className:"form-group"},r.a.createElement("label",{forhtml:"content"},"Main content"),r.a.createElement("input",{value:c.content,onChange:u,name:"content",type:"text",className:"form-control",id:"content",placeholder:"What is your post about?"})),r.a.createElement("label",{forhtml:"image"},"Fetch an image from pexels.com:"),r.a.createElement("div",{className:"input-group"},r.a.createElement("input",{value:c.keyword,onChange:u,name:"keyword",type:"text",className:"form-control",id:"image",placeholder:"Enter keyword"}),r.a.createElement("div",{className:"input-group-append"},r.a.createElement("button",{onClick:d,className:"btn btn-outline-secondary",type:"button"},"Pick random image"))),""===c.imglink?null:r.a.createElement("img",{className:"imglink",src:c.imglink,alt:"pexel",width:"465",height:"300"})),r.a.createElement("div",{className:"modal-footer d-flex justify-content-between"},r.a.createElement("button",{onClick:function(){return i({title:"",content:"",keyword:"",imglink:""})},type:"button",className:"btn btn-outline-secondary","data-dismiss":"modal"},"Cancel"),r.a.createElement("button",{onClick:function(){var e={author:t,title:c.title,content:c.content,imglink:c.imglink,date:(new Date).toLocaleString()};a(e)},type:"button",className:"btn btn-secondary","data-dismiss":"modal"},"POST")))))}));var C=function(e){var t=e.username,a=e.post,n=e.onEdit,l=e.deletePost,s=e.id;return r.a.createElement("div",{className:"post row no-gutters border rounded overflow-hidden flex-md-row mb-4 shadow-sm h-md-250 position-relative"},r.a.createElement("div",{className:"col p-4 d-flex flex-column position-static"},r.a.createElement("strong",{className:"d-inline-block mb-2 text-secondary"},a.author),r.a.createElement("h3",{className:"mb-0"},a.title),r.a.createElement("small",{className:"mb-1 text-muted text-sm"},a.date),r.a.createElement("p",{className:"mb-auto"},a.content),r.a.createElement("div",{className:"continue text-secondary font-weight-light mt-2"},"Image hidden"),a.author===t?r.a.createElement("div",{className:"d-flex justify-content-between"},r.a.createElement("button",{"data-toggle":"editmodal","data-target":"#editmodal",onClick:function(){return n({show:!0,id:s})},className:"btn btn-outline-secondary"},"Edit"),r.a.createElement("button",{onClick:function(){return l(a._id)},className:"btn btn-secondary"},"Delete")):null),r.a.createElement("div",{className:"col-auto d-flex d-lg-block",style:{backgroundImage:"url('".concat(a.imglink,"')"),backgroundRepeat:"no-repeat",backgroundPosition:"center",width:200,height:300}}))};var P=Object(c.b)((function(e){return{username:e.user.username}}),{editPostAsync:function(e){return function(t){t({type:S.EDIT_POST_START}),m.a.post("/post/".concat(e._id),e).then((function(e){return t(function(e){return{type:S.EDIT_POST_SUCCESS,payload:e}}(e.data.post))})).catch((function(e){return t((a=e.message,{type:S.EDIT_POST_FAILURE,payload:a}));var a}))}},deletePostAsync:function(e){return function(t){t({type:S.DELETE_POST_START}),m.a.delete("/post/".concat(e)).then((function(){return t(function(e){return{type:S.DELETE_POST_SUCCESS,payload:e}}(e))})).catch((function(e){return t((a=e.message,{type:S.DELETE_POST_FAILURE,payload:a}));var a}))}}})((function(e){var t=e.username,a=e.filteredPosts,l=e.editPostAsync,s=e.deletePostAsync,c=Object(n.useState)({show:!1,id:null}),i=Object(g.a)(c,2),u=i[0],m=i[1],d=Object(n.useState)({editTitle:"",editContent:""}),E=Object(g.a)(d,2),p=E[0],f=E[1],b=function(e){return f(Object(_.a)(Object(_.a)({},p),{},Object(o.a)({},e.target.name,e.target.value)))};return r.a.createElement("div",{className:"posts-container"},u.show&&r.a.createElement("div",{className:"edit-container bg-light"},r.a.createElement("div",{className:"edit-inputs"},r.a.createElement("input",{className:"edit-input",value:p.newTitle,onChange:b,placeholder:"Previous title: ".concat(a[u.id].title),name:"editTitle",id:"editTitle"}),r.a.createElement("input",{className:"edit-input",value:p.newContent,onChange:b,placeholder:"Previous title: ".concat(a[u.id].content),name:"editContent",id:"editContent"})),r.a.createElement("div",{className:"edit-buttons d-flex justify-content-between"},r.a.createElement("button",{className:"btn btn-outline-secondary",onClick:function(){m({show:!1,id:null}),f({editTitle:"",editContent:""})}},"Cancel"),r.a.createElement("button",{className:"btn btn-secondary",onClick:function(){var e=Object(_.a)(Object(_.a)({},a[u.id]),{},{title:p.editTitle,content:p.editContent,date:(new Date).toLocaleString()});l(e),m({show:!1,id:null}),f({editTitle:"",editContent:""})}},"SAVE"))),a.map((function(e,a){return r.a.createElement(C,{username:t,post:e,deletePost:s,onEdit:m,id:a,key:a})})))}));var U=Object(c.b)((function(e){return{items:e.posts.items,username:e.user.username}}),{fetchPostsAsync:function(){return function(e){e({type:S.FETCH_POSTS_START}),m.a.get("/post").then((function(t){var a;console.log(t),console.log(t.data),e((a=t.data.posts.reverse(),{type:S.FETCH_POSTS_SUCCESS,payload:a}))})).catch((function(t){return e((a=t.message,{type:S.FETCH_POSTS_FAILURE,payload:a}));var a}))}}})((function(e){var t=e.username,a=e.fetchPostsAsync,l=e.items,s=Object(n.useState)(""),c=Object(g.a)(s,2),o=c[0],i=c[1];Object(n.useEffect)((function(){var e=!0;return e&&t&&a(),function(){e=!1}}),[t,a]);var u=l.filter((function(e){return e.title.toLowerCase().includes(o.toLowerCase())}));return r.a.createElement("div",{className:"posts"},r.a.createElement("div",{className:"posts-menu"},r.a.createElement("div",{className:"new-post btn btn-sm btn-outline-secondary","data-toggle":"modal","data-target":"#exampleModal"},r.a.createElement("i",{className:"fas fa-plus-circle fa-2x"}),r.a.createElement("div",null,"New Post")),r.a.createElement("div",{className:"input-group input-group-sm",style:{flex:4}},r.a.createElement("input",{value:o,onChange:function(e){return i(e.target.value)},placeholder:"Search by title",type:"text",className:"form-control","aria-label":"Search field"}))),r.a.createElement(y,null),r.a.createElement(P,{filteredPosts:u}))})),j=a(18);var L=Object(c.b)((function(e){return{username:e.user.username}}),{logoutUser:E})((function(e){var t=e.username,a=e.logoutUser;return r.a.createElement("nav",{className:"home-nav"},r.a.createElement(j.b,{className:"link btn btn-sm btn-outline-secondary",to:"/".concat(t)},r.a.createElement("i",{style:{fontSize:20},className:"fas fa-user-edit fa-2x"}),r.a.createElement("div",null,"Edit Profile")),r.a.createElement("div",{className:"nav-profile"},r.a.createElement("img",{src:"https://via.placeholder.com/40x40.jpg",width:"35",height:"35",alt:"profile"}),t),r.a.createElement("div",{onClick:function(){v.emit("user_disconnected",t),a()},className:"nav-logout btn btn-sm btn-outline-secondary"},r.a.createElement("div",null,"Logout"),r.a.createElement("i",{style:{fontSize:20},className:"fas fa-sign-out-alt fa-2x"})))}));var A=function(){return r.a.createElement("div",{className:"home-container"},r.a.createElement(L,null),r.a.createElement("div",{className:"posts-chat-container"},r.a.createElement(U,null),r.a.createElement(O,null)))};var w=function(e){var t=e.username;return r.a.createElement("header",{className:"header d-flex justify-content-between bg-light"},r.a.createElement(j.b,{className:"link btn btn-sm btn-secondary",to:"/"},r.a.createElement("i",{style:{fontSize:20,marginRight:10},className:"fas fa-arrow-circle-left"}),r.a.createElement("div",null,"Back Home")),r.a.createElement("h2",null,t,"'s Profile"),r.a.createElement("button",{className:"link btn btn-sm btn-outline-secondary"},r.a.createElement("i",{style:{fontSize:20,marginRight:10},className:"fas fa-user-slash"}),"Delete Account"))};var I=function(e){var t=e.loading,a=e.myposts;return r.a.createElement("div",null,r.a.createElement("h3",null,"MY POSTS"),t?r.a.createElement("h2",null,"LOADING YOUR POSTS...."):r.a.createElement("h2",null,"DONE"),0!==a.length&&a.map((function(e,t){return r.a.createElement("p",{key:t},"".concat(e.author,": ").concat(e.title,". ").concat(e.content))})))};var R=Object(c.b)((function(e){var t=e.user,a=t.username,n=t.email,r=e.posts,l=r.items,s=r.areFetching;return{myposts:l.filter((function(e){return e.author===a})),username:a,email:n,areFetching:s}}),{updateUserAsync:function(e){return function(t){t({type:i.UPDATE_PROFILE_START}),m.a.post("profile/".concat(e.key),Object(o.a)({},e.key,e.value)).then((function(e){return t(function(e){return{type:i.UPDATE_PROFILE_SUCCESS,payload:e}}(e.data))})).catch((function(e){return t((a=e.message,{type:i.UPDATE_PROFILE_FAILURE,payload:a}));var a}))}}})((function(e){var t=e.username,a=e.email,l=e.areFetching,s=e.myposts,c=e.updateUserAsync,o=Object(n.useState)(""),i=Object(g.a)(o,2),u=i[0],m=i[1],d=Object(n.useState)(""),E=Object(g.a)(d,2),p=E[0],f=E[1],b=Object(n.useState)(""),v=Object(g.a)(b,2),O=v[0],S=v[1];return r.a.createElement("div",{className:"profile-page"},r.a.createElement(w,{username:t}),r.a.createElement("div",{className:"profile-pic"},r.a.createElement("div",{className:"edit-pic btn btn-sm btn-secondary"},"Edit")),"GuestUser"===t?r.a.createElement("div",null,"GuestUsers cannot edit profile details"):null,r.a.createElement("section",{className:"profile-section"},r.a.createElement("div",{className:"section-title"},r.a.createElement("h2",{className:"title"},"Username")),r.a.createElement("div",{className:"input-groups"},r.a.createElement("div",{className:"input-group"},r.a.createElement("div",{className:"input-field"},r.a.createElement("div",{className:"label"},"Current username:"),r.a.createElement("div",{className:"value"},t))),r.a.createElement("div",{className:"input-group"},r.a.createElement("div",{className:"input-field"},r.a.createElement("div",{className:"label"},"New username:"),r.a.createElement("input",{value:u,onChange:function(e){return m(e.target.value)},disabled:"GuestUser"===t,className:"value",type:"text"}))),r.a.createElement("div",{className:"input-group"},r.a.createElement("div",{className:"input-field"},r.a.createElement("button",{onClick:function(){return c({key:"username",value:u})},className:"save-btn btn btn-secondary"},"Save"))))),r.a.createElement("section",{className:"profile-section"},r.a.createElement("div",{className:"section-title"},r.a.createElement("h2",{className:"title"},"Email")),r.a.createElement("div",{className:"input-groups"},r.a.createElement("div",{className:"input-group"},r.a.createElement("div",{className:"input-field"},r.a.createElement("div",{className:"label"},"Current email:"),r.a.createElement("div",{className:"value"},a))),r.a.createElement("div",{className:"input-group"},r.a.createElement("div",{className:"input-field"},r.a.createElement("div",{className:"label"},"New email:"),r.a.createElement("input",{value:p,onChange:function(e){return f(e.target.value)},disabled:"GuestUser"===t,className:"value",type:"text"}))),r.a.createElement("div",{className:"input-group"},r.a.createElement("div",{className:"input-field"},r.a.createElement("button",{onClick:function(){return c({key:"email",value:p})},className:"save-btn btn btn-secondary"},"Save"))))),r.a.createElement("section",{className:"profile-section"},r.a.createElement("div",{className:"section-title"},r.a.createElement("h2",{className:"title"},"Password")),r.a.createElement("div",{className:"input-groups"},r.a.createElement("div",{className:"input-group"},r.a.createElement("div",{className:"input-field"},r.a.createElement("div",{className:"label"},"New password:"),r.a.createElement("input",{value:O,onChange:function(e){return S(e.target.value)},disabled:"GuestUser"===t,className:"value",type:"text"}))),r.a.createElement("div",{className:"input-group"},r.a.createElement("div",{className:"input-field"},r.a.createElement("button",{onClick:function(){return c({key:"password",value:O})},className:"save-btn btn btn-secondary"},"Save"))))),r.a.createElement(I,{loading:l,myposts:s}))})),F=a(6);a(40);var k=Object(c.b)((function(e){return{loading:e.user.loading}}),{loginUserAsync:d})((function(e){var t=e.loading,a=e.loginUserAsync,l=Object(n.useState)({username:"",password:""}),s=Object(g.a)(l,2),c=s[0],i=s[1],u=function(e){i(Object(_.a)(Object(_.a)({},c),{},Object(o.a)({},e.target.name,e.target.value)))};return r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{className:"form"},r.a.createElement("div",null,r.a.createElement("h4",null,"Sign in"),r.a.createElement("hr",null)),r.a.createElement("form",{name:"form1",className:"form-group"},r.a.createElement("label",{forhtml:"username"},"Username"),r.a.createElement("input",{name:"username",value:c.username,onChange:u,placeholder:"Username",type:"text",className:"form-control"}),r.a.createElement("label",{forhtml:"password"},"Password"),r.a.createElement("input",{name:"password",value:c.password,onChange:u,placeholder:"Password",type:"password",className:"form-control"})),r.a.createElement("button",{onClick:function(e){F.c.info("Logging in...",{position:"top-right",autoClose:1e3,hideProgressBar:!0,closeOnClick:!1,pauseOnHover:!1,draggable:!1,progress:void 0,transition:F.a}),a(c),i({username:"",password:""})},disabled:t,className:"btn btn-primary"},"LOGIN")),r.a.createElement(F.b,{position:"top-right",autoClose:1e3,hideProgressBar:!0,newestOnTop:!1,closeOnClick:!1,rtl:!1,pauseOnFocusLoss:!1,draggable:!1,pauseOnHover:!1,transport:F.a}))}));var x=Object(c.b)((function(e){return{loading:e.user.loading}}))((function(e){var t=e.loading,a=Object(n.useState)({username:"",email:"",password:""}),l=Object(g.a)(a,2),s=l[0],c=l[1],i=function(e){c(Object(_.a)(Object(_.a)({},s),{},Object(o.a)({},e.target.name,e.target.value)))},u=function(){var e=Object(T.a)(N.a.mark((function e(){return N.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,F.c.info("Registering...",{position:"top-right",autoClose:1e3,hideProgressBar:!0,closeOnClick:!1,pauseOnHover:!1,draggable:!1,progress:void 0,transition:F.a}),e.next=4,m.a.post("/auth/register",s);case 4:F.c.success("Registration success!",{position:"top-right",autoClose:1e3,hideProgressBar:!0,closeOnClick:!1,pauseOnHover:!1,draggable:!1,progress:void 0,transition:F.a}),c({username:"",email:"",password:""}),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(0),console.log(e.t0.message);case 11:case"end":return e.stop()}}),e,null,[[0,8]])})));return function(){return e.apply(this,arguments)}}();return r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{className:"form"},r.a.createElement("div",null,r.a.createElement("h4",null,"Create a new account"),r.a.createElement("hr",null)),r.a.createElement("form",{name:"form2",className:"form-group"},r.a.createElement("label",{forhtml:"username"},"Username"),r.a.createElement("input",{name:"username",value:s.username,onChange:i,placeholder:"Username",type:"text",className:"form-control"}),r.a.createElement("label",{forhtml:"email"},"Email"),r.a.createElement("input",{name:"email",value:s.email,onChange:i,placeholder:"Email",type:"email",className:"form-control"}),r.a.createElement("label",{forhtml:"password"},"Password"),r.a.createElement("input",{name:"password",value:s.password,onChange:i,placeholder:"Password",type:"password",className:"form-control"})),r.a.createElement("button",{onClick:u,disabled:t,className:"btn btn-primary"},"REGISTER")),r.a.createElement(F.b,{position:"top-right",autoClose:1e3,hideProgressBar:!0,newestOnTop:!1,closeOnClick:!1,rtl:!1,pauseOnFocusLoss:!1,draggable:!1,pauseOnHover:!1,transport:F.a}))}));var D=Object(c.b)((function(e){var t=e.user;return{loading:t.loading,guest:t.guest}}),{loginUserAsync:d})((function(e){var t=e.loginUserAsync,a=e.guest;return r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{className:"form-container"},r.a.createElement("div",{className:"login_register"},r.a.createElement(k,null),r.a.createElement(x,null)),r.a.createElement("div",null,r.a.createElement("button",{onClick:function(){F.c.info("Logging in as GuestUser...",{position:"top-right",autoClose:1e3,hideProgressBar:!0,closeOnClick:!1,pauseOnHover:!1,draggable:!1,progress:void 0,transition:F.a}),t(Object(_.a)({},a))},type:"submit",className:"btn btn-secondary",style:{margin:"0 0 30px"}},"Sign in as Guest"))),r.a.createElement(F.b,{position:"top-right",autoClose:1e3,hideProgressBar:!0,newestOnTop:!1,closeOnClick:!1,rtl:!1,pauseOnFocusLoss:!1,draggable:!1,pauseOnHover:!1,transport:F.a}))}));var G=Object(c.b)((function(e){var t=e.user;return{isLoggedIn:t.isLoggedIn,validUntil:t.validUntil,username:t.username}}),(function(e){return{logoutUser:function(){return e(E())}}}))((function(e){var t=e.username,a=e.isLoggedIn,l=e.validUntil,s=e.logoutUser;return Object(n.useEffect)((function(){if(a){var e=(new Date).getTime()/1e3;l<=e&&(s(),v.emit("user_disconnected",t))}else v.emit("user_disconnected",t)}),[a,s,l,t]),r.a.createElement("div",{className:"App"},r.a.createElement(p.d,null,r.a.createElement(p.b,{exact:!0,path:"/"},a?r.a.createElement(A,null):r.a.createElement(p.a,{to:"/login"})),r.a.createElement(p.b,{path:"/login"},a?r.a.createElement(p.a,{to:"/"}):r.a.createElement(D,null)),r.a.createElement(p.b,{to:"/".concat(t)},a?r.a.createElement(R,null):r.a.createElement(p.a,{to:"/login"})),r.a.createElement(p.b,{path:"*",component:function(){return r.a.createElement("h2",null,"404 Page Not Found")}})))})),H=a(14),W=a(70),M=a(71),B=a.n(M),z=a(30),J=a(44),Y=a.n(J);function q(e,t){return Object(_.a)(Object(_.a)({},e),{},{loading:!1,errMessage:t.payload})}var V={isLoggedIn:!1,username:null,email:null,loading:!1,validUntil:null,errMessage:null,guest:{username:"GuestUser",password:"123456"}};var $=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:V,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case i.LOGIN_START:case i.UPDATE_PROFILE_START:return Object(_.a)(Object(_.a)({},e),{},{loading:!0});case i.LOGIN_SUCCESS:return Object(_.a)(Object(_.a)({},e),{},{errMessage:null,loading:!1,isLoggedIn:!0},t.payload);case i.UPDATE_PROFILE_SUCCESS:return Object(_.a)(Object(_.a)({},e),{},{errMessage:null,loading:!1},t.payload);case i.LOGIN_FAILURE:case i.UPDATE_PROFILE_FAILURE:return q(e,t);case i.LOGOUT:return console.log("Logging out..\nuser state:",e,"\nDisconnecting from chat..."),e;default:return e}},K=a(31),Q={chatHistory:[],usersOnline:[]},X=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Q,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case f.NEW_MESSAGE:return Object(_.a)(Object(_.a)({},e),{},{chatHistory:[].concat(Object(K.a)(e.chatHistory),[t.payload])});case f.USER_ONLINE:return Object(_.a)(Object(_.a)({},e),{},{usersOnline:t.payload});default:return e}};function Z(e,t){return Object(_.a)(Object(_.a)({},e),{},{areFetching:!1,errMessage:t.payload})}var ee={items:[],areFetching:!1,errMessage:null},te=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:ee,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case S.FETCH_POSTS_START:case S.NEW_POST_START:case S.EDIT_POST_START:case S.DELETE_POST_START:return Object(_.a)(Object(_.a)({},e),{},{areFetching:!0});case S.FETCH_POSTS_SUCCESS:return Object(_.a)(Object(_.a)({},e),{},{areFetching:!1,items:t.payload});case S.NEW_POST_SUCCESS:return Object(_.a)(Object(_.a)({},e),{},{areFetching:!1,items:[t.payload].concat(Object(K.a)(e.items))});case S.EDIT_POST_SUCCESS:return Object(_.a)(Object(_.a)({},e),{},{areFetching:!1,items:e.items.map((function(e){return e._id===t.payload._id?t.payload:e}))});case S.DELETE_POST_SUCCESS:return Object(_.a)(Object(_.a)({},e),{},{areFetching:!1,items:e.items.filter((function(e){return e._id!==t.payload}))});case S.FETCH_POSTS_FAILURE:case S.DELETE_POST_FAILURE:case S.EDIT_POST_FAILURE:case S.NEW_POST_FAILURE:return Z(e,t);default:return e}},ae={key:"root",storage:Y.a,whitelist:["user","chat","posts"]},ne=Object(H.c)({user:$,chat:X,posts:te}),re=Object(z.a)(ae,(function(e,t){return t.type===i.LOGOUT&&(Y.a.removeItem("persist:root"),e=void 0),ne(e,t)})),le=[W.a,B.a],se=Object(H.d)(re,H.a.apply(void 0,le)),ce=Object(z.b)(se),oe=a(72);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));s.a.render(r.a.createElement(c.a,{store:se},r.a.createElement(j.a,null,r.a.createElement(oe.a,{persistor:ce},r.a.createElement(G,null)))),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))},73:function(e,t,a){e.exports=a(135)},78:function(e,t,a){}},[[73,1,2]]]);
//# sourceMappingURL=main.c5fb88c9.chunk.js.map